<!DOCTYPE html>
<html lang="ko" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Service Incident Analysis</title>
  <meta name="description" content="장애 원인을 데이터로 추적하는 백엔드 개발자 되기 - 서비스 장애 분석 학습 플랫폼">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/auth.js"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            gray: {
              950: '#0a0a0f'
            }
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-950 text-gray-100 min-h-screen" style="display:none">

  <!-- Hero Section -->
  <header class="hero-gradient relative overflow-hidden">
    <div class="max-w-5xl mx-auto px-6 pt-16 pb-12 text-center">
      <div class="mb-4">
        <span class="inline-block px-3 py-1 text-xs font-semibold tracking-wider uppercase rounded-full bg-indigo-500/10 text-indigo-400 border border-indigo-500/20">
          Service Reliability Course
        </span>
      </div>
      <h1 class="hero-title text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight mb-4">
        Service Incident Analysis
      </h1>
      <p class="text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto mb-10">
        장애 원인을 데이터로 추적하는 백엔드 개발자 되기
      </p>

      <!-- Overall Progress -->
      <div class="max-w-md mx-auto">
        <div class="flex items-center justify-between text-sm mb-2">
          <span class="text-gray-400 font-medium">전체 진도</span>
          <span id="progress-percent" class="text-indigo-400 font-bold">0%</span>
        </div>
        <div class="progress-bar-track">
          <div id="progress-fill" class="progress-bar-fill" style="width: 0%"></div>
        </div>
        <p id="progress-detail" class="text-xs text-gray-500 mt-2">0 / 19 모듈 완료</p>
      </div>
    </div>
  </header>

  <!-- Module Cards -->
  <main class="max-w-5xl mx-auto px-6 py-12">
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">

      <!-- Module 0 -->
      <a href="modules/0-metrics-foundations.html" id="card-module0" class="module-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="module-number">0</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-indigo-300 transition-colors">지표의 기초</h2>
            <p class="text-sm text-gray-400 mt-1">좋은 지표의 조건, RED/USE, 비즈니스↔기술 연결</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module0" class="completion-badge badge-incomplete">미완료</span>
          <span id="quiz-module0" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Module 1 -->
      <a href="modules/1-reliability-fundamentals.html" id="card-module1" class="module-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="module-number">1</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-indigo-300 transition-colors">서비스 신뢰성 지표 기본</h2>
            <p class="text-sm text-gray-400 mt-1">SLI/SLO, Golden Signals, 모니터링 생태계</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module1" class="completion-badge badge-incomplete">미완료</span>
          <span id="quiz-module1" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Module 2 -->
      <a href="modules/2-datadog-rum.html" id="card-module2" class="module-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="module-number">2</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-indigo-300 transition-colors">Datadog RUM &amp; 프론트엔드 지표</h2>
            <p class="text-sm text-gray-400 mt-1">p99 레이턴시, Core Web Vitals, 에러 추적</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module2" class="completion-badge badge-incomplete">미완료</span>
          <span id="quiz-module2" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Module 3 -->
      <a href="modules/3-aws-rds-metrics.html" id="card-module3" class="module-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="module-number">3</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-indigo-300 transition-colors">AWS RDS 메트릭 분석</h2>
            <p class="text-sm text-gray-400 mt-1">CPU, Connections, IOPS, Replication Lag</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module3" class="completion-badge badge-incomplete">미완료</span>
          <span id="quiz-module3" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Module 4 -->
      <a href="modules/4-kubernetes-monitoring.html" id="card-module4" class="module-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="module-number">4</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-indigo-300 transition-colors">Kubernetes 리소스 모니터링</h2>
            <p class="text-sm text-gray-400 mt-1">Pod/Node 리소스, OOMKill, HPA</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module4" class="completion-badge badge-incomplete">미완료</span>
          <span id="quiz-module4" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Module 5 -->
      <a href="modules/5-incident-analysis.html" id="card-module5" class="module-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="module-number">5</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-indigo-300 transition-colors">장애 원인 분석 통합 프레임워크</h2>
            <p class="text-sm text-gray-400 mt-1">타임라인, 상관 분석, Runbook, Post-mortem</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module5" class="completion-badge badge-incomplete">미완료</span>
          <span id="quiz-module5" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Module 6 -->
      <a href="modules/6-dashboard-design.html" id="card-module6" class="module-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="module-number">6</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-indigo-300 transition-colors">모니터링 대시보드 설계</h2>
            <p class="text-sm text-gray-400 mt-1">3계층 피라미드, 알림 설계, 도구별 실전 구축</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module6" class="completion-badge badge-incomplete">미완료</span>
          <span id="quiz-module6" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

    </div>

    <!-- Advanced Labs Divider -->
    <div class="relative my-12">
      <div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-800"></div></div>
      <div class="relative flex justify-center">
        <span class="bg-gray-950 px-4 text-sm font-semibold text-amber-400 uppercase tracking-wider">Advanced Labs</span>
      </div>
    </div>
    <p class="text-center text-gray-500 text-sm mb-8">실제 장애 시나리오를 기반으로 지표를 분석하고 근본 원인을 추적하는 실전 훈련</p>

    <!-- Lab Cards -->
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">

      <!-- Lab 1 -->
      <a href="modules/7-lab-db-connection-pool.html" id="card-module7" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L1</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">DB Connection Pool 고갈</h2>
            <p class="text-sm text-gray-400 mt-1">배치 쿼리 커넥션 점유 → HikariPool timeout → API 5xx</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module7" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module7" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Lab 2 -->
      <a href="modules/8-lab-slow-query-cpu.html" id="card-module8" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L2</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">Slow Query CPU 포화</h2>
            <p class="text-sm text-gray-400 mt-1">인덱스 누락 → full scan → CPU 90%+ → 전체 응답 지연</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module8" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module8" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Lab 3 -->
      <a href="modules/9-lab-memory-leak-oomkill.html" id="card-module9" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L3</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">Memory Leak OOMKill</h2>
            <p class="text-sm text-gray-400 mt-1">JVM 힙 누수 → OOMKill → Pod 재시작 반복</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module9" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module9" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Lab 4 -->
      <a href="modules/10-lab-crashloop-backoff.html" id="card-module10" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L4</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">CrashLoopBackOff</h2>
            <p class="text-sm text-gray-400 mt-1">ConfigMap 오류 → Pod 시작 실패 → 반복 재시작</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module10" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module10" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Lab 5 -->
      <a href="modules/11-lab-frontend-regression.html" id="card-module11" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L5</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">GraphQL API 성능 회귀</h2>
            <p class="text-sm text-gray-400 mt-1">배포 후 API 응답 급등 → APM trace 분석 → N+1 쿼리 + missing index</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module11" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module11" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Lab 6 -->
      <a href="modules/12-lab-cascading-failure.html" id="card-module12" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L6</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">Cascading Failure</h2>
            <p class="text-sm text-gray-400 mt-1">외부 API timeout → circuit breaker 실패 → 연쇄 장애</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module12" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module12" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Lab 7 -->
      <a href="modules/13-lab-deployment-rollback.html" id="card-module13" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L7</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">Deployment Rollback 판단</h2>
            <p class="text-sm text-gray-400 mt-1">카나리 배포 혼합 신호 → 롤백 vs 조사 의사결정</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module13" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module13" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Lab 8 -->
      <a href="modules/14-lab-rds-deadlock-storm.html" id="card-module14" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L8</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">RDS Deadlock Storm</h2>
            <p class="text-sm text-gray-400 mt-1">트랜잭션 순서 충돌 → deadlock 폭증 → DML 처리 마비</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module14" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module14" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Lab 9 -->
      <a href="modules/15-lab-event-loop-saturation.html" id="card-module15" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L9</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">Event Loop Saturation</h2>
            <p class="text-sm text-gray-400 mt-1">Node.js event loop 블로킹 → 전체 API 응답 지연 → GC/Heap 분석</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module15" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module15" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Lab 10 -->
      <a href="modules/16-lab-disk-io-inode-exhaustion.html" id="card-module16" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L10</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">Disk I/O & Inode Exhaustion</h2>
            <p class="text-sm text-gray-400 mt-1">디스크 I/O 병목과 inode 고갈 장애 분석</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module16" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module16" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Lab 11 -->
      <a href="modules/17-lab-redis-cache-stampede.html" id="card-module17" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L11</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">Redis Cache Stampede</h2>
            <p class="text-sm text-gray-400 mt-1">캐시 스탬피드와 N+1 쿼리 장애 분석</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module17" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module17" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

      <!-- Lab 12 -->
      <a href="modules/18-lab-cpu-throttle-network.html" id="card-module18" class="lab-card block no-underline group">
        <div class="flex items-start gap-4 mb-4">
          <div class="lab-number">L12</div>
          <div class="flex-1 min-w-0">
            <h2 class="text-lg font-bold text-white group-hover:text-amber-300 transition-colors">CPU Throttling + Network Saturation</h2>
            <p class="text-sm text-gray-400 mt-1">CPU 쓰로틀링과 네트워크 포화 복합 장애</p>
          </div>
        </div>
        <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-800">
          <span id="badge-module18" class="completion-badge badge-incomplete">미완료</span>
          <span id="scenario-module18" class="completion-badge badge-quiz hidden"></span>
        </div>
      </a>

    </div>

    <!-- Reset -->
    <div class="text-center mt-12">
      <button onclick="resetProgress()" class="reset-btn">
        진도 초기화
      </button>
    </div>
  </main>

  <!-- Footer -->
  <footer class="border-t border-gray-800 mt-8">
    <div class="max-w-5xl mx-auto px-6 py-8 text-center text-sm text-gray-500">
      <p>Service Incident Analysis &mdash; 서비스 장애 분석 학습 플랫폼</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="js/progress.js"></script>
  <script src="js/quiz.js"></script>
  <script>
    function updateDashboard() {
      const progress = ProgressTracker.getProgress();
      const overall = ProgressTracker.getOverallProgress();
      const completedCount = Object.values(progress).filter(v => v).length;

      document.getElementById('progress-percent').textContent = overall + '%';
      document.getElementById('progress-fill').style.width = overall + '%';
      document.getElementById('progress-detail').textContent = completedCount + ' / ' + ProgressTracker.TOTAL_MODULES + ' 모듈 완료';

      // Theory modules (0-6)
      for (let i = 0; i <= 6; i++) {
        const moduleId = 'module' + i;
        const card = document.getElementById('card-' + moduleId);
        const badge = document.getElementById('badge-' + moduleId);
        const quizBadge = document.getElementById('quiz-' + moduleId);
        if (!card || !badge) continue;

        if (progress[moduleId]) {
          card.classList.add('completed');
          badge.className = 'completion-badge badge-complete';
          badge.innerHTML = '<span class="completion-checkmark">&#10003;</span> 완료';
        } else {
          card.classList.remove('completed');
          badge.className = 'completion-badge badge-incomplete';
          badge.textContent = '미완료';
        }

        const quizScore = ProgressTracker.getQuizScore(moduleId);
        if (quizScore && quizBadge) {
          quizBadge.classList.remove('hidden');
          quizBadge.textContent = 'Quiz ' + quizScore.score + '/' + quizScore.total;
        }
      }

      // Lab modules (7-15)
      for (let i = 7; i < ProgressTracker.TOTAL_MODULES; i++) {
        const moduleId = 'module' + i;
        const card = document.getElementById('card-' + moduleId);
        const badge = document.getElementById('badge-' + moduleId);
        const scenarioBadge = document.getElementById('scenario-' + moduleId);
        if (!card || !badge) continue;

        if (progress[moduleId]) {
          card.classList.add('completed');
          badge.className = 'completion-badge badge-complete';
          badge.innerHTML = '<span class="completion-checkmark">&#10003;</span> 완료';
        } else {
          card.classList.remove('completed');
          badge.className = 'completion-badge badge-incomplete';
          badge.textContent = '미완료';
        }

        const scenarioScore = ProgressTracker.getScenarioScore(moduleId);
        if (scenarioScore && scenarioBadge) {
          scenarioBadge.classList.remove('hidden');
          scenarioBadge.textContent = scenarioScore.grade + ' 등급';
          scenarioBadge.className = 'completion-badge badge-quiz scenario-grade-badge grade-' + scenarioScore.grade;
        }
      }
    }

    function resetProgress() {
      if (confirm('모든 학습 진도와 퀴즈 결과가 초기화됩니다. 계속하시겠습니까?')) {
        ProgressTracker.reset();
        updateDashboard();
      }
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', updateDashboard);
  </script>
</body>
</html>
