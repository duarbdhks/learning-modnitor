<!DOCTYPE html>
<html lang="ko" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lab 7: Deployment Rollback 판단 | Service Incident Analysis</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../css/style.css">
  <script src="../js/auth.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            gray: {
              950: '#0a0a0f',
              900: '#111118',
              850: '#16161f',
              800: '#1e1e2a',
              700: '#2a2a3a',
              600: '#3a3a4d',
              400: '#8888a0',
              300: '#a0a0b8',
              200: '#c0c0d0',
              100: '#e0e0ea',
            }
          }
        }
      }
    }
  </script>
  <style>
    html { scroll-behavior: smooth; }
    @media (max-width: 1023px) {
      .sidebar-toggle-target { display: none; }
      .sidebar-toggle-target.open { display: block; }
    }
  </style>
</head>
<body class="bg-gray-950 text-gray-100 min-h-screen" style="display:none">
  <header class="sticky top-0 z-50 bg-gray-950/90 backdrop-blur-sm border-b border-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <a href="../index.html" class="flex items-center gap-2 text-gray-400 hover:text-amber-400 transition-colors text-sm font-medium">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
          홈으로
        </a>
        <div class="hidden sm:block w-px h-6 bg-gray-800"></div>
        <div>
          <span class="text-red-400 text-xs font-semibold tracking-wider uppercase">Lab 7 • EXPERT</span>
          <h1 class="text-lg sm:text-xl font-bold text-gray-100">Deployment Rollback 판단</h1>
        </div>
      </div>
      <button class="lg:hidden p-2 rounded-lg bg-gray-900 border border-gray-800 hover:border-gray-700 transition-colors" onclick="document.getElementById('sidebar').classList.toggle('open')">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
    </div>
  </header>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 py-8 flex gap-8">
    <aside id="sidebar" class="sidebar-toggle-target lg:block w-64 flex-shrink-0">
      <nav class="lg:sticky lg:top-24 bg-gray-900 rounded-xl border border-gray-800 p-5">
        <h3 class="text-xs font-semibold uppercase tracking-wider text-gray-500 mb-4">조사 진행</h3>
        <div id="investigation-timeline">
          <p class="text-xs text-gray-600">조사를 시작하면 진행 상황이 표시됩니다.</p>
        </div>
        <div class="mt-6 pt-4 border-t border-gray-800">
          <div class="flex items-center justify-between text-xs text-gray-500 mb-2">
            <span>진행률</span><span id="progress-percent">0%</span>
          </div>
          <div class="w-full bg-gray-800 rounded-full h-1.5">
            <div id="progress-bar" class="bg-red-500 h-1.5 rounded-full transition-all duration-500" style="width: 0%"></div>
          </div>
        </div>
      </nav>
    </aside>

    <main class="flex-1 min-w-0">
      <div id="scenario-container"></div>
      <div class="border-t border-gray-800 pt-8 mt-16">
        <div class="flex justify-center mb-8">
          <button id="complete-btn" onclick="handleComplete()" class="px-8 py-3 bg-red-600 hover:bg-red-500 text-white font-semibold rounded-xl transition-all duration-200 transform hover:scale-105">학습 완료</button>
        </div>
        <div class="flex items-center justify-between">
          <a href="12-lab-cascading-failure.html" class="flex items-center gap-2 text-gray-400 hover:text-red-400 transition-colors text-sm font-medium">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
            Lab 6: Cascading Failure
          </a>
          <a href="../index.html" class="flex items-center gap-2 text-red-400 hover:text-red-300 transition-colors text-sm font-medium">
            홈으로
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
          </a>
        </div>
      </div>
    </main>
  </div>

  <script src="../js/progress.js"></script>
  <script src="../js/scenario.js"></script>
  <script src="../js/scenarios/lab7-deployment-rollback.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof ScenarioEngine !== 'undefined' && typeof SCENARIO_LAB7 !== 'undefined') {
        ScenarioEngine.init('scenario-container', SCENARIO_LAB7, 'module13');
      }
      if (typeof ProgressTracker !== 'undefined' && ProgressTracker.isComplete('module13')) {
        markButtonComplete();
      }
    });
    function handleComplete() {
      if (typeof ProgressTracker !== 'undefined') ProgressTracker.markComplete('module13');
      markButtonComplete();
    }
    function markButtonComplete() {
      var btn = document.getElementById('complete-btn');
      if (btn) {
        btn.classList.remove('bg-red-600', 'hover:bg-red-500');
        btn.classList.add('bg-emerald-600', 'hover:bg-emerald-500', 'completed');
        btn.innerHTML = '<svg class="w-5 h-5 inline mr-2 -mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>학습 완료됨';
      }
    }
  </script>
</body>
</html>
